var info=document.getElementById("info");var rules=document.getElementById("rules");var hairy=document.getElementById("hairy");var lightnext=document.getElementById("lightnext");var lightprev=document.getElementById("lightprev");var sel=document.getSelection();var commaSpaceBefore=/\s+(?=,)/g;var commaNoSpaceAfterNoDigit=/,(?=[^\s\n\d])|(?<=[^\d]),(?=\d)/g;var commaSpaceBeforeInsideDigit=/(?<=\d)\s+,(?=\d)/g;var paranthesisSpaceInternal=/[\(\[]\s+|\s+[\)\]]/g;var paranthesisSpaceExternal=/(?<=\S)[\(\[]|[\)\]](?=[a-zA-Z0-9îÎăĂâÂșȘțȚ])/g;var exclamationQuestionWithSpaces=/\s+[\?\!]/g;var exclamationQuestionMoreThanTwo=/[\?\!]{3,}/g;var pointSeparated=/\s+\./g;var pointWithLetter=/\.[a-zA-ZîÎăĂâÂșȘțȚ]/g;var pointSpacedAtEnd=/\.\s+\n/mg;var pointDecimalMustBeComma=/(?<=\d)\.(?=\d)/g;var pointDecimalSpacedInsideDigit=/(?<=\d)\s+\.(?=\d)|(?<=\d)\.\s+(?=\d)|(?<=\d)\s+\.\s+(?=\d)/g;var twopointsSpacedBefore=/\s+\:/g;var twopointsSpacedAfter=/\:\s{2,}|\:\s+$/g;var twopointsNoSpace=/(?<=[^\s])\:(?=[^\s])/g;var suspensionSpaceBefore=/\s+(?=\.{3})/g;var suspensionSpaceAfterMissing=/(?<=\.{2})\.(?!\s)[^$]/g;var suspensionNumber=/(?<!\.)\.{2}(?!\.)|\.{4,}/g;var suspensionSpaceInside=/(?<=\.)\s+(?=\.)/g;var suspensionSpaceAfter=/(?<=[^\s]|^)(?<=\.{3})(\s+$|\s{2,}(?=[^$]))/g;var dialogSpaceBefore=/^\s+(?=[\u002d\u2010\u2011\u2012\u2013\u2014\u2015])/mg;var dialogSpaceAfter=/(?<=^\s*[\u002d\u2010\u2011\u2012\u2013\u2014\u2015])\s{2,}/mg;var dialogNoSpaceAfter=/(?<=^\s*)[\u002d\u2010\u2011\u2012\u2013\u2014\u2015](?=\S)/mg;var dialogIllegalSign=/(?<=^\s*)[\u002d\u2010\u2011\u2012\u2013\u2014]/mg;var obliqueBar=/\s+\/|\/\s+/g;var apostropheWithSpace=/\s+\'\s+|\s+\'|\'\s+/g;var apostropheMultiple=/\'{2,}/g;var quotationMarkStraight=/"/g;var quotationMarkSimulated=/,{2,}/g;var quotationMarkBeginUpper=/\u201C(?=[^\u201D]+\u201D)/g;var spaceStartParagraph=/^\s+/mg;var spaceEndParagraph=/(?<!\n)\s+$/mg;var spaceMultiple=/[^\S\r\n]{2,}/g;var emptyParagraph=/^\n/mg;var rx=[];rx.push(commaSpaceBefore,commaNoSpaceAfterNoDigit,commaSpaceBeforeInsideDigit,paranthesisSpaceInternal,paranthesisSpaceExternal,exclamationQuestionWithSpaces,exclamationQuestionMoreThanTwo,pointSeparated,pointWithLetter,pointSpacedAtEnd,pointDecimalMustBeComma,pointDecimalSpacedInsideDigit,twopointsSpacedBefore,twopointsSpacedAfter,twopointsNoSpace,suspensionSpaceBefore,suspensionSpaceAfterMissing,suspensionNumber,suspensionSpaceInside,suspensionSpaceAfter,dialogSpaceBefore,dialogSpaceAfter,dialogNoSpaceAfter,dialogIllegalSign,obliqueBar,apostropheWithSpace,apostropheMultiple,quotationMarkStraight,quotationMarkSimulated,quotationMarkBeginUpper,spaceStartParagraph,spaceEndParagraph,spaceMultiple,emptyParagraph);function spots(a,c){if(a===null){return[]}if(sel===null){return[]}var b=[];b.push.apply(b,mistakes(c,a).filter(function(d){return d.length}));return b}function mistakes(d,a){if(hairy.firstChild===null){[]}var b=[];var c;while((c=d.exec(a))!=null){b.push(c)}return b}var mistakes_one_by_one;var make_mistakes_one_by_one=function(a){mistakes_one_by_one=({curr:-1,ff:a,next:function(){this.curr++;if(this.curr>=this.ff.length){this.curr=0}return this.ff[this.curr]},prev:function(){this.curr--;if(this.curr<=-1){this.curr=this.ff.length-1}return this.ff[this.curr]},len:function(){return this.ff.length}})};function showerr(){var b=mistakes_one_by_one.len();var a=mistakes_one_by_one.curr+1;switch(b){case 0:b="<strong>arată bine</strong>—alege acum altă verificare";break;case 1:b="<strong>o atenționare</strong>";break;default:b="<strong>"+b+" aten\u021Bion\u0103ri</strong>";if(a>0){b+=" -  te afli la <strong>#"+a+"</strong>"}}info.innerHTML=b}function scrollhighlight(b){if(b===void 0){b="next"}if(!mistakes_one_by_one||mistakes_one_by_one.len()===0){return}var d=b==="next"?mistakes_one_by_one.next():mistakes_one_by_one.prev();showerr();if(d===undefined){return}if(hairy===null){return}hairy.focus();sel===null||sel===void 0?void 0:sel.removeAllRanges();hairy.scrollTop=0;var c=hairy.value;var a=d.index+d[0].length;hairy.value=c.substring(0,a);var e=hairy.scrollHeight;hairy.scrollTop=e;hairy.value=c;hairy.setSelectionRange(d.index,a)}function runtext(d){var b;if(d===void 0){d=true}var c=document.getSelection();if(c===null){return 0}if(d){c.removeAllRanges()}var e=(b=parseInt(rules.value))!==null&&b!==void 0?b:-1;if(e===-1){return 0}if(!(e in rx)){return 0}make_mistakes_one_by_one(spots(hairy.value,rx[e]));var a=mistakes_one_by_one.len();return a}function usable(c,b){if(c===void 0){c=true}if(b===void 0){b=-1}var a=[lightprev,lightnext];if(0<=b&&b<a.length){a=[a[b]]}a.forEach(function(d){d.disabled=!c})}rules.addEventListener("change",function(a){a.preventDefault();usable(false);if(rules.value==="-1"){info.textContent="";return}var b=runtext();if(b>0){usable(true);lightnext.click()}else{showerr()}});lightnext.addEventListener("click",function(a){a.preventDefault();scrollhighlight("next")});lightprev.addEventListener("click",function(a){a.preventDefault();scrollhighlight("prev")});hairy.spellcheck=false;hairy.addEventListener("keyup",function(a){if(a.target!==hairy){return}if(rules.value==="-1"){return}usable(false);var b=runtext(false);if(b>0){usable(true)}showerr()});usable(false);